---
title: What's Up with Mastodon and "Referer" Headers?
date: 2024-05-19 12:30:34 -0300
---

One thing that's helped me keep up with [blogging this month](https://anderegg.ca/2024/05/02/weblog-posting-month-2024) is seeing my [web analytics](https://anderegg.ca/2023/12/14/switching-from-plausible-to-tinylytics) numbers go up. I maybe check my analytics too often, but at least it's a good motivator to be productive.

I've known for a while that Mastodon doesn't send [HTTP Referer headers](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer) [^1] for outgoing links via the web app, but it's always slightly annoyed me. I still get visitor data for people coming from Mastodon, I just can't tell that Mastodon sent them.

This isn't really that big a deal. Most people don't use web clients for social media services, and the mobile/native clients don't send referral data. Still, I do see referral headers for some web traffic from Bluesky and Threads in my stats. I was curious why it's not the same for Mastodon.

In late 2019, Eugen Rochko, the CEO/lead developer of Mastodon, [approved a pull request](https://github.com/mastodon/mastodon/pull/12202) that added the [`noreferrer`](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/noreferrer) keyword to the [`rel` attribute](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel) on links. Later, in 2022, someone [opened a GitHub issue](https://github.com/mastodon/mastodon/issues/21795) requesting that some default value be added for referrals from Mastodon. Rochko then said that the change was made "[more or less by accident](https://github.com/mastodon/mastodon/issues/21795#issuecomment-1329273504)", and that it was "[missed during review](https://github.com/mastodon/mastodon/issues/21795#issuecomment-1374680597)". Regardless, you can see by the tone of the thread in the GitHub issue that the community didn't want this changed back.

There are [definitely security implications to the Referer header](https://developer.mozilla.org/en-US/docs/Web/Security/Referer_header:_privacy_and_security_concerns), the original intent was to use [`Referrer-Policy: origin`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy#origin). In that case, the only piece of information that would leak via link clicks would be the domain of the Mastodon instance. That seems like a reasonable tradeoff to me, but the community still had concerns. The main one being that that malicious users could trace back links to a specific Mastodon instance to harass users. That's true, and I understand the worry, but malicious users could still trace links back to an instance unless it blocks all web crawlers… and those [crawlers honour your blocking request](https://developers.google.com/search/docs/crawling-indexing/robots/intro#understand-the-limitations-of-a-robots.txt-file). Mastodon is still part of the open web, after all. Still this does offer another level of protection. Anyway, eventually the issue was closed and all Mastodon links still contain both [`noreferrer`](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/noreferrer) and [`noopener`](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/noopener) keywords in the `rel` attribute.

I was mostly coming at this from a curiosity angle, and I understand the privacy concerns, but I also worry that this isn't great for Mastodon in the long term. I don't see a lot of web traffic from other social platforms in my web analytics — but I see **none** from Mastodon. However, I know that I get bumps in web traffic whenever I post an article to my Mastodon feed. People who are just looking at web logs would never see Mastodon traffic, even if it's driving lots of people to a site. If I ever decide I really care about tracking Mastodon traffic on my links in detail, I'll likely add [UTM parameters](https://en.wikipedia.org/wiki/UTM_parameters) for links I post, but I'm not sure it's great that Mastodon is effectively a hidden traffic source.

---

[^1]: I only realized today that "Referer" isn't spelled correctly. Apparently this is a spelling mistake that was [locked into the specification in 1996](https://en.wikipedia.org/wiki/HTTP_referer#Etymology). I guess I've gotten away this long without realizing it because I've been saved by HTTP libraries?
